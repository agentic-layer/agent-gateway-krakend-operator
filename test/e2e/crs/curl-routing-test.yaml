apiVersion: v1
kind: Pod
metadata:
  name: test-routing
spec:
  containers:
  - name: curl
    image: curlimages/curl:latest
    command: ["/bin/sh", "-c"]
    args:
    - |
      curl -v -H "Content-Type: application/json" http://agent-gateway:10000/mocked-agent -d '{
        "jsonrpc": "2.0",
        "id": 1,
        "method": "message/send",
        "params": {
          "message": {
            "role": "user",
            "parts": [
              {
                "kind": "text",
                "text": "Message to echo back"
              }
            ],
            "messageId": "9229e770-767c-417b-a0b0-f0741243c589",
            "contextId": "abcd1234-5678-90ab-cdef-1234567890ab"
          },
          "metadata": {}
        }
      }'
#    securityContext:
#      allowPrivilegeEscalation: false
#      capabilities:
#        drop:
#        - ALL
#      runAsNonRoot: true
#      runAsUser: 1000
#      seccompProfile:
#        type: RuntimeDefault
  restartPolicy: Never
